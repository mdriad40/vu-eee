<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CSE Routine</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <div id="app">
        <!-- Landing Screen -->
        <section id="landing" class="screen"> 
            <div class="landing-card card">
                <div id="lottie" class="lottie"></div>
                <h1 class="app-title">VU Class Routine</h1>
                <div class="selectors">
                    <label class="field control">
                        <span>Department</span>
                        <select id="department" class="dropdown">
                            <option value="">Select Department</option>
                        </select>
                    </label>
                        <label class="field control">
                        <span>Semester</span>
                        <select id="semester" class="dropdown">
                            <option value="">Select Semester</option>
                            <option value="1-1">1st</option>
                            <option value="1-2">2nd</option>
                            <option value="2-1">3rd</option>
                            <option value="2-2">4th</option>
                            <option value="3-1">5th</option>
                            <option value="3-2">6th</option>
                            <option value="4-1">7th</option>
                            <option value="4-2">8th</option>
                        </select>
                    </label>
                    <label class="field control">
                        <span>Section</span>
                        <select id="section" class="dropdown" disabled>
                            <option value="">Select Section</option>
                        </select>
                    </label>
                </div>
                <button id="getSchedule" class="primary-btn">Get Schedule</button>
                <p id="landingError" class="error-text" aria-live="polite"></p>
            </div>
        </section>

        <!-- Student Routine Screen -->
        <section id="student" class="screen hidden">
            <header class="main-header">
                <div class="header-title">Student Schedule</div>
            </header>
            
            <div class="selection-controls card">
                <div class="control">
                    <label>Department</label>
                    <select id="departmentDisplay" class="dropdown">
                        <option value="">Select Department</option>
                    </select>
                </div>
                <div class="control">
                    <label>Semester</label>
                    <select id="semesterDisplay"></select>
                </div>
                <div class="control">
                    <label>Section</label>
                    <select id="sectionDisplay" disabled></select>
                </div>
            </div>

            <div class="content">
                <div class="details card">
                    <div class="details-row">
                        <div>
                            <div class="muted">Semester</div>
                            <div id="detailsSemester" class="accent"></div>
                        </div>
                        <div>
                            <div class="muted">Section</div>
                            <div id="detailsSection" class="accent"></div>
                        </div>
                        <div>
                            <div class="muted">Total Courses</div>
                            <div id="detailsTotal" class="accent"></div>
                        </div>
                        <div>
                            <div class="muted">Routine Version</div>
                            <div id="detailsVersion" class="accent">Fall 2025 v1</div>
                        </div>
                        <div>
                            <div class="muted">CR</div>
                            <div id="detailsCR1" class="accent"></div>
                        </div>
                        <div>
                            <div class="muted">CR</div>
                            <div id="detailsCR2" class="accent"></div>
                        </div>
                    </div>
                </div>

                <div class="days scroller" id="dayScroller" role="tablist" aria-label="Days">
                    <!-- Days injected by JS -->
                </div>

                <div id="dateToday" class="date-today"></div>

                <div id="scheduleContainer" class="schedule">
                    <!-- Cards injected by JS -->
                </div>

                <div id="emptyMessage" class="empty hidden">
                    <div class="empty-title">Enjoy your day -- No class Today!</div>
                    <div id="emptyLottie" class="empty-lottie"></div>
                </div>
                <div id="networkMessage" class="empty hidden">Network error.</div>
            </div>
        </section>

        <!-- Teacher Routine Screen -->
        <section id="teacher" class="screen hidden">
            <header class="main-header">
                <div class="header-title">Teacher Schedule</div>
            </header>
            
            <div class="selection-controls card">
                <div class="control teacher-search-wrapper">
                    <label>Teacher</label>
                    <div class="autocomplete-container">
                        <input type="text" id="teacherSearch" placeholder="Enter Teacher Initial: MRH" autocomplete="off" spellcheck="false" />
                        <div id="teacherSuggestions" class="autocomplete-dropdown hidden"></div>
                    </div>
                </div>
                <div class="control teacher-department-wrapper">
                    <label>Department</label>
                    <select id="teacherDepartment">
                        <option value="">Select Department</option>
                    </select>
                </div>
            </div>

            <div class="content">
                <div class="details card">
                    <div class="details-row">
                        <div>
                            <div class="muted">Teacher</div>
                            <div id="teacherDetailsName" class="accent"></div>
                        </div>
                        <div>
                            <div class="muted">Batch</div>
                            <div id="teacherDetailsBatch" class="accent"></div>
                        </div>
                        <div>
                            <div class="muted">Total Course</div>
                            <div id="teacherDetailsTotal" class="accent"></div>
                        </div>
                        <div>
                            <div class="muted">Routine Version</div>
                            <div id="teacherDetailsVersion" class="accent">—</div>
                        </div>
                    </div>
                </div>

                <div>
                    <button id="teacherContactBtn" class="primary-btn small">Contact</button>
                </div>

                <div class="days scroller" id="teacherDayScroller" role="tablist" aria-label="Days">
                    <!-- Days injected by JS -->
                </div>

                <div id="teacherDateToday" class="date-today"></div>

                <div id="teacherScheduleContainer" class="schedule">
                    <!-- Cards injected by JS -->
                </div>

                <div id="teacherEmptyMessage" class="empty hidden">No classes scheduled for this day.</div>
                <div id="teacherNetworkMessage" class="empty hidden">Network error.</div>
            </div>

            <!-- Teacher Contact Popup -->
            <div id="teacherContactPopup" class="popup-overlay hidden">
                <div class="popup-content">
                    <div class="popup-header">
                        <h3 id="teacherContactTitle" class="popup-title"></h3>
                        <button class="popup-close" id="teacherContactClose">&times;</button>
                    </div>
                    <div class="popup-body">
                        <div class="contact-info-item">
                            <span class="contact-label">Designation:</span>
                            <span id="teacherContactDesignation" class="contact-value">—</span>
                        </div>
                        <div class="contact-info-item">
                            <span class="contact-label">Phone:</span>
                            <span id="teacherContactPhone" class="contact-value">—</span>
                        </div>
                        <div class="contact-info-item">
                            <span class="contact-label">Email:</span>
                            <span id="teacherContactEmail" class="contact-value">—</span>
                        </div>
                        <div class="contact-info-item">
                            <span class="contact-label">Department:</span>
                            <span id="teacherContactDepartment" class="contact-value">—</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section id="empty" class="screen hidden">
            <div class="placeholder">Empty page.</div>
        </section>
        <section id="query" class="screen hidden">
            <header class="main-header">
                <div class="header-title">Query</div>
            </header>
            <!-- Top Menu Bar -->
            <div class="query-menu-bar">
                <button class="query-menu-segment active" id="roomQueryTab" data-tab="room-query">
                    <svg class="query-menu-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                    <span>Room Query</span>
                </button>
                <button class="query-menu-segment" id="crInfoTab" data-tab="cr-info">
                    <svg class="query-menu-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    <span>CR Info</span>
                </button>
            </div>

            <!-- Room Query Interface -->
            <div id="roomQueryInterface" class="query-interface">
                <div class="selection-controls card room-query-selection">
                    <div class="control">
                        <label>Department</label>
                        <select id="roomQueryDepartment">
                            <option value="">Select Department</option>
                        </select>
                    </div>
                    <div class="control">
                        <label>Search By</label>
                        <select id="roomQuerySearchBy">
                            <option value="">Select Option</option>
                            <option value="room">Room No</option>
                            <option value="timeslot">Time Slot</option>
                        </select>
                    </div>
                    <div class="control" id="roomQueryThirdControl">
                        <label id="roomQueryThirdLabel">Select Option</label>
                        <select id="roomQueryThirdSelect" disabled>
                            <option value="">Search By</option>
                        </select>
                    </div>
                </div>
                <div id="roomQueryDaySelectorWrapper" class="hidden">
                    <div id="roomQueryDayTitle" class="room-query-day-title"></div>
                    <div class="days scroller" id="roomQueryDayScroller" role="tablist" aria-label="Days">
                        <!-- Days injected by JS -->
                    </div>
                    <div id="roomQueryDateToday" class="date-today"></div>
                </div>
                <div id="roomQueryResults" class="query-results"></div>
            </div>

            <!-- CR Info Interface -->
            <div id="crInfoInterface" class="query-interface hidden">
                <div class="selection-controls card">
                    <div class="control">
                        <label>Department</label>
                        <select id="crInfoDepartment">
                            <option value="">Select Department</option>
                        </select>
                    </div>
                    <div class="control">
                        <label>Semester</label>
                        <select id="crInfoSemester">
                            <option value="">Select Semester</option>
                            <option value="1-1">1st</option>
                            <option value="1-2">2nd</option>
                            <option value="2-1">3rd</option>
                            <option value="2-2">4th</option>
                            <option value="3-1">5th</option>
                            <option value="3-2">6th</option>
                            <option value="4-1">7th</option>
                            <option value="4-2">8th</option>
                        </select>
                    </div>
                    <div class="control">
                        <label>Section</label>
                        <select id="crInfoSection" disabled>
                            <option value="">Select Section</option>
                        </select>
                    </div>
                </div>
                <div id="crInfoResults" class="cr-info-results"></div>
            </div>
        </section>

        <!-- Bottom Navigation -->
        <nav class="tabbar" role="navigation" aria-label="Bottom Navigation">
            <button class="tab active" data-tab="student" aria-label="Student">
                <span class="tab-icon"><img src="attachment/student.png" alt="Student" class="tab-icon-img" id="student-icon"></span>
                <span class="tab-label">Student</span>
            </button>
            <button class="tab" data-tab="teacher" aria-label="Teacher">
                <span class="tab-icon"><img src="attachment/id-card (1).png" alt="Teacher" class="tab-icon-img" id="teacher-icon"></span>
                <span class="tab-label">Teacher</span>
            </button>
            <button class="tab" data-tab="query" aria-label="Query">
                <span class="tab-icon"><img src="attachment/history (1).png" alt="Query" class="tab-icon-img" id="query-icon"></span>
                <span class="tab-label">Query</span>
            </button>
        </nav>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- Firebase SDK (Compat for non-module setup) -->
    <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-database-compat.js"></script>
    <script src="app.js"></script>
</body>
</html>

